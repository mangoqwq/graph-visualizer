(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{397:function(e,t,r){Promise.resolve().then(r.bind(r,5309))},5309:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return Home}});var n=r(7437),o=r(2265);function addVertexIfNotExist(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(e.vertices.find(e=>e.id===t))return e;e.vertices.push({id:t,label:r})}function toBidirectionalAdjList(e){let t=new Map;for(let r of e.vertices)t.set(r.id,[]);for(let o of e.edges){var r,n;t.has(o.from)&&(null===(r=t.get(o.from))||void 0===r||r.push(o.to)),t.has(o.to)&&(null===(n=t.get(o.to))||void 0===n||n.push(o.from))}return t}var s=r(1279);let generateGraph=(e,t)=>{let r={directed:t,vertices:[],edges:[]},n=e.split("\n");var o=0;for(let e of n){let matchVertex=()=>{let t=/^\s*(-?\d+)\s*(?::(.*))?\s*$/,n=e.match(t);if(null!==n){console.log(n);let[,e,t]=n;r.vertices.some(t=>t.id===parseInt(e))?function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=e.vertices.find(e=>e.id===t);void 0!==n&&(n.label=r)}(r,parseInt(e),t):addVertexIfNotExist(r,parseInt(e),t)}},matchEdge=()=>{let t=/^\s*(-?\d+)\s+(-?\d+)\s*$/,n=e.match(t);if(null!==n){var s,l,a;let[,e,t]=n;s=o++,l=parseInt(e),a=parseInt(t),addVertexIfNotExist(r,l),addVertexIfNotExist(r,a),r.edges.push({id:s,from:l,to:a})}};matchVertex(),matchEdge()}return r};function TextEditor(){let{graphBundle:e,setGraphBundle:t,inputBoxText:r,setInputBoxText:l}=(0,o.useContext)(x),{graph:a,vertexStates:i,edgeStates:d}=e,[c,u]=(0,o.useState)(!1),setGraph=e=>{t({graph:e,vertexStates:i,edgeStates:d})};(0,o.useEffect)(()=>{setGraph(generateGraph(r,a.directed))},[r]);let onChange=e=>{r!==e.target.value&&(l(e.target.value),setGraph(generateGraph(e.target.value,a.directed)))};return(0,n.jsxs)("div",{className:" flex flex-col",children:[(0,n.jsxs)("div",{onMouseEnter:()=>{u(!0)},onMouseLeave:()=>{u(!1)},children:["Input: ",(0,n.jsx)(s.G,{icon:"question-circle",className:"max-h-6 max-w-6"}),c?(0,n.jsxs)("p",{className:"fixed bg-black color rounded-lg text-white px-2",children:["lone vertex - id ",(0,n.jsx)("br",{}),"labeled vertex - id: label ",(0,n.jsx)("br",{}),"edge - id1 id2 ",(0,n.jsx)("br",{})]}):null]}),(0,n.jsx)("div",{className:"grow ",children:(0,n.jsx)("textarea",{className:"border-2 border-solid resize-none h-full",value:r,onChange:e=>onChange(e)})})]})}let Vector=class Vector{add(e){return Vector.add(this,e)}sub(e){return Vector.sub(this,e)}norm(){return Vector.norm(this)}scale(e){return Vector.scale(this,e)}normalize(){return Vector.normalize(this)}scaleToLength(e){return Vector.scaleToLength(this,e)}static add(e,t){return new Vector(e.x+t.x,e.y+t.y)}static sub(e,t){return new Vector(e.x-t.x,e.y-t.y)}static norm(e){return Math.sqrt(e.x*e.x+e.y*e.y)}static scale(e,t){return new Vector(e.x*t,e.y*t)}static normalize(e){return 1e-9>=e.norm()?new Vector(0,0):Vector.scale(e,1/Vector.norm(e))}static scaleToLength(e,t){return Vector.scale(Vector.normalize(e),t)}constructor(e,t){this.x=e,this.y=t}};var l=r(2397),a=r.n(l);let i=5/6;function placeInBounds(e,t){var{x:r,y:n}=e;return r<40&&(r=40),r>t-40&&(r=t-40),n<40&&(n=40),n>t-40&&(n=t-40),new Vector(r,n)}function VertexView(e){let{v:t}=e,{graphBundle:r,setGraphBundle:s,mouseMode:l,mouseDown:d,windowHeight:c}=(0,o.useContext)(x),{graph:u,vertexStates:m,edgeStates:f}=r,h=c*i,setVertexStates=e=>s({...r,vertexStates:e});if(void 0===m.get(t.id))return(0,n.jsx)(n.Fragment,{});let{x:g,y:p}=m.get(t.id).pos;return(0,n.jsx)(a(),{onDrag:(e,r)=>{setVertexStates(new Map(Array.from(m.entries()).map(e=>{let[n,o]=e;if(n!==t.id)return[n,o];var{x:s,y:l}=r;return{x:s,y:l}=placeInBounds(new Vector(s,l),h),[n,{...m.get(t.id),pos:new Vector(s,l)}]})))},onStart:(e,r)=>{let n=new Map(m);n.set(t.id,{...m.get(t.id),heldAt:Date.now()}),setVertexStates(n)},onStop:(e,r)=>{var n=m.get(t.id).frozen;"freeze"===l.mode&&Date.now()-m.get(t.id).heldAt<100&&10>=new Vector(r.deltaX,r.deltaY).norm()&&(n=!n);let o=new Map(m);o.set(t.id,{...m.get(t.id),heldAt:null,frozen:n}),setVertexStates(o)},position:{x:g,y:p},children:(0,n.jsxs)("g",{onClick:()=>{"paint"===l.mode&&("vertex-border"===l.subject&&setVertexStates(new Map(m).set(t.id,{...m.get(t.id),borderColor:l.color})),"vertex-fill"===l.subject&&setVertexStates(new Map(m).set(t.id,{...m.get(t.id),fillColor:l.color})))},onMouseEnter:()=>{"paint"===l.mode&&"vertex-border"===l.subject&&d&&setVertexStates(new Map(m).set(t.id,{...m.get(t.id),borderColor:l.color})),"paint"===l.mode&&"vertex-fill"===l.subject&&d&&setVertexStates(new Map(m).set(t.id,{...m.get(t.id),fillColor:l.color}))},children:[(0,n.jsx)("circle",{r:20,strokeWidth:m.get(t.id).frozen?"4":"2",stroke:m.get(t.id).borderColor,fill:m.get(t.id).fillColor}),(0,n.jsx)("text",{textAnchor:"middle",alignmentBaseline:"middle",className:"select-none",fontWeight:m.get(t.id).textBold?"bold":"normal",children:null===t.label?t.id:t.label})]})},t.id)}function EdgeView(e){var t,r;let{e:s}=e,{graphBundle:l,setGraphBundle:a,mouseMode:i,mouseDown:d}=(0,o.useContext)(x),{graph:c,vertexStates:u,edgeStates:m}=l,setEdgeStates=e=>a({...l,edgeStates:e});if(void 0===u.get(s.from)||void 0===u.get(s.to))return(0,n.jsx)(n.Fragment,{});let{x:f,y:h}=u.get(s.from).pos,{x:g,y:p}=u.get(s.to).pos,v=g-f,b=p-h,w=Math.sqrt(v*v+b*b),j=v/w,C=b/w,N=f+20*j,y=h+20*C,S=g-20*j,V=p-20*C;return(0,n.jsxs)("svg",{children:[(0,n.jsx)("defs",{children:(0,n.jsx)("marker",{id:"arrowhead",markerWidth:"5",markerHeight:"6",refX:"5",refY:"3.5",orient:"auto",children:(0,n.jsx)("polygon",{points:"0 0, 5 3, 0 6"})})}),(0,n.jsxs)("g",{onMouseEnter:()=>{"paint"===i.mode&&"edge"===i.subject&&d&&setEdgeStates(new Map(m).set(s.id,{...m.get(s.id),color:i.color}))},onClick:()=>{"paint"===i.mode&&"edge"===i.subject&&setEdgeStates(new Map(m).set(s.id,{...m.get(s.id),color:i.color}))},pointerEvents:"all",children:[(0,n.jsx)("line",{x1:N,y1:y,x2:S,y2:V,stroke:"black",visibility:"hidden",strokeWidth:"13"}),(0,n.jsx)("line",{x1:N,y1:y,x2:S,y2:V,stroke:null!==(r=null===(t=m.get(s.id))||void 0===t?void 0:t.color)&&void 0!==r?r:"black",strokeWidth:"2","marker-end":c.directed?"url(#arrowhead)":""})]})]})}let d={CEN_CHARGE:-700,VTX_CHARGE:400,EDGE_CHARGE:200,MIN_ELEC_DIST:10,K_CONST:.5,SPR_CONST:15,SPR_LEN:100};function GraphViewer(){let{graphBundle:e,setGraphBundle:t,windowHeight:r}=(0,o.useContext)(x),{graph:s,vertexStates:l,edgeStates:a}=e,c=(0,o.useRef)(void 0),u=(0,o.useRef)(0),m=r*i;function randInt(e,t){return Math.floor(Math.random()*(t-e))+e}(0,o.useEffect)(()=>{let step=e=>{if(void 0!==c.current){let r=c.current;t(t=>(function(e,t,r){let{graph:n,vertexStates:o,edgeStates:s}=e,{CEN_CHARGE:l,VTX_CHARGE:a,EDGE_CHARGE:i,MIN_ELEC_DIST:c,K_CONST:u,SPR_CONST:m,SPR_LEN:x}=d,f=x+n.edges.length,h=new Map;for(let e of n.vertices)h.set(e.id,new Vector(0,0));for(let e of(new Vector(t/2,t/2),n.vertices)){if(void 0===o.get(e.id))continue;let t=o.get(e.id).pos,r=o.size;for(let s of n.vertices){if(e.id===s.id||void 0===o.get(s.id))continue;let n=o.get(s.id).pos,l=n.sub(t),i=Math.max(c,l.norm()),d=-u*a*a/(i*i),m=l.scaleToLength(d/r);h.set(e.id,h.get(e.id).add(m))}}for(let e of n.edges){if(void 0===o.get(e.from)||void 0===o.get(e.to)||o.get(e.to)===o.get(e.from))continue;let t=o.get(e.from).pos,r=o.get(e.to).pos,n=r.sub(t),s=n.norm(),l=m*(s-f),a=n.scaleToLength(l/s);h.set(e.from,h.get(e.from).add(a)),h.set(e.to,h.get(e.to).sub(a))}let g=new Map,p=Math.min(r/15,3);for(let e of n.vertices)if(void 0!==o.get(e.id)){if(null!==o.get(e.id).heldAt||o.get(e.id).frozen){g.set(e.id,o.get(e.id));continue}g.set(e.id,{...o.get(e.id),pos:o.get(e.id).pos.add(h.get(e.id).scale(p))})}for(let e of n.vertices){if(void 0===g.get(e.id))continue;let r=g.get(e.id);g.set(e.id,{...r,pos:placeInBounds(r.pos,t)})}return{...e,vertexStates:g}})(t,m,e-r))}c.current=e,u.current=window.requestAnimationFrame(step)};return u.current=window.requestAnimationFrame(step),()=>{window.cancelAnimationFrame(u.current)}},[m]);let f=new Map;var h=!1;for(let e of s.vertices)if(l.has(e.id)&&!Number.isNaN(l.get(e.id).pos.x))f.set(e.id,l.get(e.id));else{let t=randInt(20,m-20),r=randInt(20,m-20);f.set(e.id,{pos:new Vector(t,r),frozen:!1,heldAt:null,textBold:!1,borderColor:"black",fillColor:"white"}),h=!0}return h&&t({...e,vertexStates:f}),(0,n.jsx)("div",{className:"min-w-[${dim}] min-h-[${dim}]",children:(0,n.jsxs)("svg",{width:m,height:m,className:"border-solid border-2 graph-view-svg",id:"graph-view-svg",children:[s.edges.map(e=>(0,n.jsx)(EdgeView,{e:e},e.id)),s.vertices.map(e=>(0,n.jsx)(VertexView,{v:e},e.id))]})})}function arrangeLayers(e,t,r,n){let{graph:o,vertexStates:s}=e;if(0===o.vertices.length)return e;let l=new Map(s),a=r/(t.length+1);for(let e=0;e<t.length;e++){let o=t[e],i=r/(o.length+1);for(let t=0;t<o.length;t++){let d=o[t],c=(()=>{switch(n){case"down":return new Vector((t+1)*i,(e+1)*a);case"up":return new Vector((t+1)*i,r-(e+1)*a);case"left":return new Vector(r-(e+1)*a,(t+1)*i);case"right":return new Vector((e+1)*a,(t+1)*i)}})();l.set(d,{...s.get(d),pos:c})}}for(let e of o.vertices.map(e=>e.id)){let t=l.get(e);t.frozen=!0}return{...e,vertexStates:l}}var c=r(9119);function HorizontalLine(){return(0,n.jsx)("div",{style:{borderBottom:"1px solid #ccc",margin:"15px 0"}})}function InsertSubgraphPanel(){let[e,t]=(0,o.useState)("complete"),{graphBundle:r,setGraphBundle:s,inputBoxText:l,setInputBoxText:a}=(0,o.useContext)(x),parseIntoList=e=>{if(!e||""===e)return[];let t=e.match(/[^\d-+]*([-+]?\d+)[^\d-+]*/g).map(e=>parseInt(e));return t},handleSubmit=t=>{t.preventDefault();var r=l;switch(""===r||r.endsWith("\n")||(r+="\n"),e){case"complete":{let e=parseIntoList(t.currentTarget.vertices.value);for(let[t,n]of e.entries())for(let[o,s]of e.entries())t<o&&(r+=n+" "+s+"\n")}break;case"complete-bipartite":{let e=parseIntoList(t.currentTarget.vertices1.value),n=parseIntoList(t.currentTarget.vertices2.value);for(let t of e)for(let e of n)r+=t+" "+e+"\n"}break;case"cycle":{let e=parseIntoList(t.currentTarget.vertices.value);for(let[t,n]of e.entries())r+=n+" "+e[(t+1)%e.length]+"\n"}break;case"path":{let e=parseIntoList(t.currentTarget.vertices.value);for(let[t,n]of e.entries())0!==t&&(r+=e[t-1]+" "+n+"\n")}}a(r)};return(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"flex",children:(0,n.jsxs)("div",{className:"m-auto text-center flex",children:["Insert\xa0",(0,n.jsxs)("div",{className:"hover-dropdown m-auto",children:[e,(0,n.jsxs)("div",{className:"hover-dropdown-content",children:[(0,n.jsx)("div",{className:"hover-dropdown-item",onClick:()=>t("complete"),children:"complete"}),(0,n.jsx)("div",{className:"hover-dropdown-item",onClick:()=>t("complete-bipartite"),children:"complete bipartite"}),(0,n.jsx)("div",{className:"hover-dropdown-item",onClick:()=>t("cycle"),children:"cycle"}),(0,n.jsx)("div",{className:"hover-dropdown-item",onClick:()=>t("path"),children:"path"})]})]}),"\xa0subgraph"]})}),(()=>{let t=(()=>{let t="px-1 focus:outline-none focus:border-transparent";switch(e){case"complete":case"cycle":case"path":return(0,n.jsx)("input",{type:"text",name:"vertices",placeholder:"Vertices (e.x. 1 2 3)",className:t});case"complete-bipartite":return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("input",{type:"text",name:"vertices1",placeholder:"Side 1 (e.x. 1 2 3)",className:t}),(0,n.jsx)("input",{type:"text",name:"vertices2",placeholder:"Side 2 (e.x. 4 5 6)",className:t})]})}})();return(0,n.jsxs)("form",{autoComplete:"off",method:"post",onSubmit:handleSubmit,className:"flex flex-col",children:[t,(0,n.jsx)("button",{type:"submit",value:"Submit",className:"panel-button",children:"Insert"})]})})()]})}function ModifyCommandPanel(){let{graphBundle:e,setGraphBundle:t}=(0,o.useContext)(x),{graph:r,vertexStates:s,edgeStates:l}=e,setDirected=n=>{console.log(n),t({...e,graph:{...r,directed:n}})};return(0,n.jsxs)(CommandPanel,{children:[(0,n.jsx)(InsertSubgraphPanel,{}),(0,n.jsx)(HorizontalLine,{}),(0,n.jsx)("div",{className:"flex flex-row w-full",children:(0,n.jsx)("button",{onClick:()=>setDirected(!r.directed),className:"panel-button grow basis-0",children:"Toggle directed"})})]})}function ArrangeAsPanel(){let{graphBundle:e,setGraphBundle:t,windowHeight:r,graphViewDim:s}=(0,o.useContext)(x),{graph:l,vertexStates:a,edgeStates:i}=e,[d,c]=(0,o.useState)("down");return(0,n.jsxs)("div",{className:"flex flex-row",children:[(0,n.jsx)("div",{className:"flex flex-col justify-around space-y-2",children:["down","up","left","right"].map(e=>(0,n.jsxs)("button",{type:"submit",name:"type",value:e,className:"grow basis-0 text-lg font-mono aspect-square ".concat(d===e?"bg-gray-200":"bg-white hover:bg-gray-100"),onClick:()=>c(e),children:["down"===e&&"↓","up"===e&&"↑","left"===e&&"←","right"===e&&"→"]},e))}),(0,n.jsx)("div",{className:"border-l border-gray-300 mx-2"}),(0,n.jsxs)("form",{autoComplete:"off",method:"post",className:"flex flex-col",onSubmit:r=>{r.preventDefault();var n=parseInt(r.currentTarget.vertices.value.trim());isNaN(n)&&(n=Math.min(...l.vertices.map(e=>e.id)));let o=r.nativeEvent,a=o.submitter,i=a.value;if(!isNaN(n)){if("bfs"===i){let r=function(e,t,r,n){let{graph:o,vertexStates:s}=e;if(void 0===o.vertices.find(e=>e.id===t))return e;let l=toBidirectionalAdjList(o);var a=[];let i=new Map,d=[t];for(i.set(t,0);d.length>0;){let e=d.shift(),t=i.get(e);for(let r of(void 0===a[t]&&(a[t]=[]),a[t].push(e),l.get(e)))i.has(r)||(i.set(r,t+1),d.push(r))}return console.log(a),arrangeLayers(e,a,r,n)}(e,n,s,d);t(r)}else if("dfs"===i){let r=function(e,t,r,n){let{graph:o,vertexStates:s}=e;if(void 0===o.vertices.find(e=>e.id===t))return e;let l=toBidirectionalAdjList(o);var a=[];let i=new Set,dfs=(e,t)=>{if(!i.has(e))for(let r of(i.add(e),void 0===a[t]&&(a[t]=[]),a[t].push(e),l.get(e)))dfs(r,t+1)};return dfs(t,0),arrangeLayers(e,a,r,n)}(e,n,s,d);t(r)}}},children:[(0,n.jsx)("input",{type:"text",name:"vertices",placeholder:"Source vertex id (e.x. 1)",className:"px-1 focus:outline-none focus:border-transparent"}),(0,n.jsxs)("div",{className:"flex flex-row w-full",children:[(0,n.jsx)("button",{type:"submit",name:"type",value:"bfs",className:"panel-button grow basis-0",children:"Arrange BFS order"}),(0,n.jsx)("button",{type:"submit",name:"type",value:"dfs",className:"panel-button grow basis-0",children:"Arrange DFS order"})]}),(0,n.jsx)(HorizontalLine,{}),(0,n.jsx)("div",{className:"flex flex-row w-full",children:(0,n.jsx)("button",{onClick:()=>t(function(e,t,r){let{graph:n,vertexStates:o}=e;if(0===n.vertices.length)return e;if(!1==n.directed)return alert("Graph is not directed"),e;let s=function(e){let t=new Map;for(let r of e.vertices)t.set(r.id,[]);for(let o of e.edges){var r,n;t.has(o.from)&&(null===(r=t.get(o.from))||void 0===r||r.push(o.to)),!e.directed&&t.has(o.to)&&(null===(n=t.get(o.to))||void 0===n||n.push(o.from))}return t}(n),l=new Map;for(let e of n.vertices)l.set(e.id,0);for(let e of n.edges)l.set(e.to,l.get(e.to)+1);let a=[];for(let e of n.vertices)0===l.get(e.id)&&a.push(e.id);for(var i=[];a.length>0;){let e=a.shift();for(let t of(i.push(e),s.get(e)))l.set(t,l.get(t)-1),0===l.get(t)&&a.push(t)}console.log(s,i);var d=new Map;for(let e=0;e<i.length;e++){let t=i[e];void 0===d.get(t)&&d.set(t,0);let r=d.get(t);for(let n of s.get(t))console.log(t,n),void 0===d.get(n)?d.set(n,r+1):d.set(n,Math.max(d.get(n),e+1))}var c=[];let u=Math.max(...Array.from(d.values()))+1;for(let e=0;e<u;e++)c.push([]);for(let e of n.vertices){let t=d.get(e.id);void 0!==t&&c[t].push(e.id)}return console.log(d,c),arrangeLayers(e,c,t,r)}(e,s,d)),className:"panel-button grow basis-0",children:"Arrange DAG"})})]})]})}function setFreeze(e,t){let{graph:r,vertexStates:n}=t,o=new Map(n);for(let t of r.vertices)o.set(t.id,{...n.get(t.id),frozen:e});return{...t,vertexStates:o}}function ArrangeCommandPanel(){let{graphBundle:e,setGraphBundle:t,graphViewDim:r}=(0,o.useContext)(x),{graph:s,vertexStates:l,edgeStates:a}=e;return(0,n.jsxs)(CommandPanel,{children:[(0,n.jsxs)("div",{className:"flex flex-row w-full",children:[(0,n.jsx)("button",{onClick:()=>t(setFreeze(!0,e)),className:"panel-button grow basis-0",children:"Freeze all"}),(0,n.jsx)("button",{onClick:()=>t(setFreeze(!1,e)),className:"panel-button grow basis-0",children:"Unfreeze all"})]}),(0,n.jsx)(HorizontalLine,{}),(0,n.jsx)(ArrangeAsPanel,{})]})}function LocateCommandPanel(){return(0,n.jsx)(CommandPanel,{children:(0,n.jsx)("p",{children:"Coming soon!"})})}function PaintCommandPanel(){let{mouseMode:e,setMouseMode:t}=(0,o.useContext)(x),[r,s]=(0,o.useState)({r:255,g:0,b:0,a:1}),[l,a]=(0,o.useState)(!1),[i,d]=(0,o.useState)({mode:"paint",subject:"vertex-border",color:"rgba(255, 0, 0, 1)"}),getColor=()=>"rgba(".concat(r.r,", ").concat(r.g,", ").concat(r.b,", ").concat(r.a,")");return(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsxs)("div",{className:"m-auto text-center flex relative",children:["Paint\xa0",(0,n.jsxs)("div",{className:"hover-dropdown m-auto",children:[i.subject,(0,n.jsxs)("div",{className:"hover-dropdown-content",children:[(0,n.jsx)("div",{className:"hover-dropdown-item",onClick:()=>{d({mode:"paint",subject:"vertex-border",color:"rgba(255, 0, 0, 1)"}),"paint"===e.mode&&t({mode:"paint",subject:"vertex-border",color:getColor()})},children:"vertex border"}),(0,n.jsx)("div",{className:"hover-dropdown-item",onClick:()=>{d({mode:"paint",subject:"vertex-fill",color:"rgba(255, 0, 0, 1)"}),"paint"===e.mode&&t({mode:"paint",subject:"vertex-fill",color:getColor()})},children:"vertex fill"}),(0,n.jsx)("div",{className:"hover-dropdown-item",onClick:()=>{d({mode:"paint",subject:"edge",color:"rgba(255, 0, 0, 1)"}),"paint"===e.mode&&t({mode:"paint",subject:"edge",color:getColor()})},children:"edge"})]})]}),"\xa0with\xa0",(0,n.jsx)("div",{className:"w-4 h-4 rounded-full border-none",onClick:()=>{a(!l),"paint"===e.mode&&t({mode:"paint",subject:e.subject,color:getColor()})},style:{background:getColor()}}),l?(0,n.jsx)(c.AI,{onChange:r=>{s(r.rgb),"paint"===e.mode&&t({mode:"paint",subject:e.subject,color:getColor()})},color:r,className:"absolute top-5"}):null]}),"paint"===e.mode?(0,n.jsx)("button",{onClick:()=>t({mode:"freeze"}),className:"panel-button ",children:"Cancel"}):(0,n.jsx)("button",{onClick:()=>{t({mode:"paint",subject:i.subject,color:getColor()})},className:"panel-button ",children:"Brush mode"})]})}function AnnotateCommandPanel(){let{graphBundle:e,setGraphBundle:t}=(0,o.useContext)(x),{graph:r,vertexStates:s}=e,setBoldVertexLabels=n=>{let o=new Map(s);for(let e of r.vertices)o.set(e.id,{...s.get(e.id),textBold:n});t({...e,vertexStates:o})};return(0,n.jsxs)(CommandPanel,{children:[(0,n.jsx)(PaintCommandPanel,{}),(0,n.jsx)(HorizontalLine,{}),(0,n.jsxs)("div",{className:"flex flex-row w-full",children:[(0,n.jsx)("button",{onClick:()=>setBoldVertexLabels(!0),className:"panel-button grow basis-0",children:"Bold vertex labels"}),(0,n.jsx)("button",{onClick:()=>setBoldVertexLabels(!1),className:"panel-button grow basis-0",children:"Unbold vertex labels"})]})]})}function ExportCommandPanel(){return(0,n.jsx)(CommandPanel,{children:(0,n.jsx)("button",{onClick:()=>{let e=document.getElementById("graph-view-svg");if(null===e)return;let t=new XMLSerializer().serializeToString(e),r=new Blob([t],{type:"image/svg+xml;charset=utf-8"}),n=URL.createObjectURL(r),o=document.createElement("a");o.href=n,o.download="graph.svg",document.body.appendChild(o),o.click(),document.body.removeChild(o)},className:"panel-button w-full",children:"Download SVG"})})}function CommandPanel(e){return(0,n.jsx)("div",{className:"border-solid border-2 grow p-2 h-full w-full",children:e.children})}function CommandBar(e){let{setMouseMode:t}=(0,o.useContext)(x);return(0,n.jsx)("div",{className:"flex justify-between",onClick:()=>t({mode:"freeze"}),children:e.children})}function CommandMenu(){let[e,t]=(0,o.useState)({type:"modify"}),r=(()=>{switch(e.type){case"modify":return(0,n.jsx)(ModifyCommandPanel,{});case"arrange":return(0,n.jsx)(ArrangeCommandPanel,{});case"locate":return(0,n.jsx)(LocateCommandPanel,{});case"annotate":return(0,n.jsx)(AnnotateCommandPanel,{});case"export":return(0,n.jsx)(ExportCommandPanel,{})}})(),style=t=>{var r="grow basis-0 ";return e.type===t?r+="bg-gray-200":r+="hover:bg-gray-100 active:bg-gray-200",r};return(0,n.jsxs)("div",{className:"min-w-[400px] max-w-[400px] flex flex-col",children:[(0,n.jsxs)(CommandBar,{children:[(0,n.jsx)("button",{onClick:()=>t({type:"modify"}),className:style("modify"),children:"Modify"}),(0,n.jsx)("button",{onClick:()=>t({type:"arrange"}),className:style("arrange"),children:"Arrange"}),(0,n.jsx)("button",{onClick:()=>t({type:"locate"}),className:style("locate"),children:"Locate"}),(0,n.jsx)("button",{onClick:()=>t({type:"annotate"}),className:style("annotate"),children:"Annotate"}),(0,n.jsx)("button",{onClick:()=>t({type:"export"}),className:style("export"),children:"Export"})]}),(0,n.jsx)("div",{children:r})]})}var u=r(1988),m=r(2759);u.vI.add(m.Fuz);let x=(0,o.createContext)({graphBundle:{graph:{directed:!1,vertices:[],edges:[]},vertexStates:new Map,edgeStates:new Map},setGraphBundle:()=>{},inputBoxText:"",setInputBoxText:()=>{},mouseMode:{mode:"freeze"},setMouseMode:()=>{},mouseDown:!1,setMouseDown:()=>{},windowHeight:0,graphViewDim:0});function GraphVisualizer(){let[e,t]=(0,o.useState)("0 1\n0 2\n0 3\n1 3\n"),[r,s]=(0,o.useState)({graph:generateGraph(e,!1),vertexStates:new Map,edgeStates:new Map}),[l,a]=(0,o.useState)({mode:"freeze"}),[d,c]=(0,o.useState)(!1),[u,m]=(0,o.useState)(800),[f,h]=(0,o.useState)(0);return(0,o.useLayoutEffect)(()=>{m(window.innerHeight),h(window.innerHeight*i)},[]),(0,o.useEffect)(()=>{let handleResize=()=>{m(window.innerHeight),h(window.innerHeight*i)};return window.addEventListener("resize",handleResize),()=>window.removeEventListener("resize",handleResize)},[]),(0,n.jsx)("main",{children:(0,n.jsx)(x.Provider,{value:{graphBundle:r,setGraphBundle:s,inputBoxText:e,setInputBoxText:t,mouseMode:l,setMouseMode:a,mouseDown:d,setMouseDown:c,windowHeight:u,graphViewDim:f},children:(0,n.jsx)("div",{className:"h-screen m-screen flex",onMouseDown:()=>c(!0),onMouseUp:()=>c(!1),children:(0,n.jsxs)("div",{className:"flex h-5/6 m-auto",children:[(0,n.jsx)(TextEditor,{}),(0,n.jsx)(GraphViewer,{}),(0,n.jsx)(CommandMenu,{})]})})})})}function Home(){return(0,n.jsx)("main",{children:(0,n.jsx)(GraphVisualizer,{})})}}},function(e){e.O(0,[676,425,971,472,744],function(){return e(e.s=397)}),_N_E=e.O()}]);